function updateLanguageInButton(e){document.getElementById("start-record").innerText=`START RECORDING IN ${e.toUpperCase()}`}function calculateTime(e){const t=6*e,n=t%3600;return{hours:Math.floor(t/3600),minutes:Math.floor(n/60),seconds:n%60}}function updateLanguage(e){const t=$("#speaker-data"),n=t.find("#loader1,#loader2"),a=t.find("#speakers-wrapper"),o=t.find("#speaker-value"),r=t.find("#hours-wrapper"),d=t.find("#hour-value");n.removeClass("d-none"),r.addClass("d-none"),a.addClass("d-none"),updateLanguageInButton(e),fetch(`/getDetails/${e}`).then(e=>{if(e.ok)return e.json();throw Error(e.statusText||"HTTP error")}).then(e=>{try{const t=e.find(e=>1===e.index).count,{hours:s,minutes:l,seconds:c}=calculateTime(t);d.text(`${s}h ${l}m ${c}s`),o.text(e.find(e=>0===e.index).count),n.addClass("d-none"),r.removeClass("d-none"),a.removeClass("d-none"),localStorage.setItem("speakersData",JSON.stringify(e))}catch(e){console.log(e)}}).catch(e=>{console.log(e)})}$(document).ready(function(){const e=/^[6-9]\d{9}$/,t=/^\S+@\S+[\.][0-9a-z]+$/,n=$("#proceed-box"),a=n.parent(),o=document.querySelectorAll('input[name = "gender"]'),r=document.getElementById("age"),d=document.getElementById("mother-tongue"),s=$("#username"),l=s.next(),c=$("#tnc");let i="Odia";const u=n=>e.test(n)||t.test(n),g=()=>{s.val().length>11?(s.tooltip("enable"),s.tooltip("show")):(s.tooltip("disable"),s.tooltip("hide"))},m=()=>{const e=s.val().trim();u(e)?(s.addClass("is-invalid"),l.removeClass("d-none")):(s.removeClass("is-invalid"),l.addClass("d-none")),c.trigger("change"),g()};s.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto",trigger:"focus"}),g(),c.prop("checked",!1),a.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto"});(()=>{const e=localStorage.getItem("speakerDetails");if(e){const t=JSON.parse(e),n=document.querySelector('input[name = "gender"][value="'+t.gender+'"]');n&&(n.checked=!0,n.previous=!0),r.value=t.age,d.value=t.motherTongue,s.val(t.userName?t.userName.trim().substring(0,12):""),m()}})(),o.forEach(e=>{e.addEventListener("click",e=>{e.target.previous&&(e.target.checked=!1),e.target.previous=e.target.checked})});const p=e=>{u(e)?a.attr("data-original-title","Please validate any error message before proceeding"):a.attr("data-original-title","Please agree to the Terms and Conditions before proceeding")};let h;document.getElementById("languageTop").addEventListener("change",e=>{h=e.target.value,$("#start_recording").removeAttr("disabled")}),document.getElementById("start_recording").addEventListener("click",()=>{i=h});let v="Odia";document.getElementById("language").addEventListener("change",e=>{updateLanguage(v=e.target.value),updateGraph(v)}),document.getElementById("start-record").addEventListener("click",()=>{i=v}),p(s.val().trim()),c.change(function(){const e=s.val().trim();this.checked&&!u(e)?(n.removeAttr("disabled").removeClass("point-none"),a.tooltip("disable")):(p(e),n.prop("disabled","true").addClass("point-none"),a.tooltip("enable"))}),s.on("input focus",m),n.on("click",()=>{if(c.prop("checked")){const e=Array.from(o).filter(e=>e.checked),t=e.length?e[0].value:"",n=s.val().trim().substring(0,12);if(u(n))return;const a={gender:t,age:r.value,motherTongue:d.value,userName:n,language:i};localStorage.setItem("speakerDetails",JSON.stringify(a)),location.href="/record"}}),$("#userModal").on("shown.bs.modal",function(){document.getElementById("resetBtn").addEventListener("click",()=>{const e=document.querySelector('input[name = "gender"]:checked');e&&(e.checked=!1),r.selectedIndex=0,d.selectedIndex=0,s[0].value=""})}),updateLanguage("Odia")}),module.exports={updateLanguageInButton:updateLanguageInButton,calculateTime:calculateTime};