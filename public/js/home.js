!function e(t,a,r){function n(s,l){if(!a[s]){if(!t[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return n(a||e)},c,c.exports,e,t,a,r)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=$(".chart-row"),i=l.find(".loader"),c=l.find(".chart");l.find('[data-toggle="popover"]'),$("body");function d(e,t){var a=[];return e.forEach(function(e){var r=e[t]?e:o(o({},e),{},s({},t,"Anonymous")),n=a.findIndex(function(e){return r[t].toLowerCase()===e[t].toLowerCase()});n>=0?(a[n].contributions+=r.contributions,a[n].speakers+=r.speakers):a.push(r)}),a}var u=function(e){var t=[];return["male","female","anonymous","others"].forEach(function(a){e.data.forEach(function(e){e.gender||(e.gender="anonymous"),a===e.gender&&t.push(o(o({},e),{},{gender:e.gender.charAt(0).toUpperCase()+e.gender.slice(1)}))})}),t};function g(e,t){$.fn.popover.Constructor.Default.whiteList.table=[],$.fn.popover.Constructor.Default.whiteList.tbody=[],$.fn.popover.Constructor.Default.whiteList.tr=[],$.fn.popover.Constructor.Default.whiteList.td=[],Promise.all([fetch("/timeline?language=".concat(e,"&timeframe=").concat(t)),fetch("/contributions/gender?language=".concat(e)),fetch("/contributions/age?language=".concat(e))]).then(function(e){return Promise.all(e.map(function(e){return e.json()}))}).then(function(e){try{i.hide().removeClass("d-flex"),c.removeClass("d-none");var t=u(e[1]),a=d(e[2].data,"age_group").sort(function(e,t){return Number(e.speakers)-Number(t.speakers)});v(e[0]),f(t),h(a),setTimeout(function(){fetch("https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css"),fetch("https://fonts.googleapis.com/icon?family=Material+Icons"),fetch("css/notyf.min.css"),fetch("css/record.css")},2e3)}catch(e){console.log(e),i.show().addClass("d-flex"),c.addClass("d-none")}}).catch(function(e){console.log(e)})}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"createColumn",value:function(e,t){return'<div class="'.concat(t,'">')+'<table class="table table-sm table-borderless mb-0"><tbody>'+e.join("")+"</tbody></table></div>"}},{key:"createTableWithTwoColumns",value:function(e,t){var a=e.length,r=Math.ceil(a/2),n=this.createTableRows(e.slice(0,r),t),o=this.createTableRows(e.slice(r,a),t);return'<div class="row">'+this.createColumn(n,"col-6")+this.createColumn(o,"col-6")+"</div>"}},{key:"createTableRows",value:function(e,t){return e.map(function(e){return"<tr><td>".concat(e[t],"</td><td>").concat(e.count,"</td></tr>")})}},{key:"createTableWithOneColumn",value:function(e,t){var a=this.createTableRows(e,t);return'<div class="row">'.concat(this.createColumn(a,"col"),"</div>")}}])&&r(t.prototype,a),n&&r(t,n),e}(),p=["#85A8F9","#B7D0FE","#316AFF","#294691"],h=function(e){var t=am4core.create("age-group-chart",am4charts.PieChart3D);t.data=e.slice(0,3).concat({age_group:"Others",speakers:e.slice(3).reduce(function(e,t){return e+Number(t.speakers)},0)}),t.paddingBottom=50,t.innerRadius=am4core.percent(40),t.depth=50,t.legend=new am4charts.Legend,t.legend.labels.template.fill=am4core.color("#74798c"),t.legend.valueLabels.template.fill=am4core.color("#74798c"),t.legend.labels.template.textDecoration="none",t.legend.valueLabels.template.textDecoration="none",t.legend.itemContainers.template.paddingTop=5,t.legend.itemContainers.template.paddingBottom=5,t.legend.labels.template.states.getKey("active").properties.textDecoration="line-through",t.legend.valueLabels.template.states.getKey("active").properties.textDecoration="line-through",t.legend.valueLabels.template.align="right",t.legend.valueLabels.template.textAlign="start";var a=t.series.push(new am4charts.PieSeries3D);a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.calculatePercent=!0,a.slices.template.tooltipText="{category}: [bold]{value.percent.formatNumber('#.0')}% ({value.value})[/]",a.dataFields.value="speakers",a.dataFields.depthValue="speakers",a.dataFields.category="age_group",a.slices.template.adapter.add("fill",function(e,t){return p[t.dataItem.index]})},f=function(e){am4core.ready(function(){var t=am4core.create("gender-chart",am4charts.XYChart);t.data=e;var a=t.xAxes.push(new am4charts.CategoryAxis);a.dataFields.category="gender",a.renderer.minGridDistance=20,a.renderer.labels.template.fill="#000",a.renderer.grid.template.disabled=!0,a.renderer.baseGrid.disabled=!1,a.renderer.labels.template.fontSize=12;var r=t.yAxes.push(new am4charts.ValueAxis);r.renderer.grid.template.disabled=!1,r.renderer.labels.template.fill="#000",r.renderer.grid.template.strokeDasharray="3,3",r.renderer.labels.template.fontSize=12,r.title.text="Number of hours",r.title.fontSize=12;var n=t.series.push(new am4charts.ColumnSeries);n.calculatePercent=!0,n.dataFields.valueY="speakers",n.dataFields.categoryX="gender",n.columns.template.tooltipText="{categoryX} : [bold]{valueY.percent.formatNumber('#.0')}% ({valueY.value})[/]";var o=n.columns.template;o.adapter.add("fill",function(e,t){return p[p.length-1-t.dataItem.index]}),o.adapter.add("stroke",function(e,t){return p[p.length-1-t.dataItem.index]})})},v=function(e){am4core.ready(function(){am4core.useTheme(am4themes_animated);for(var t=am4core.create("timeline-chart",am4charts.XYChart),a=e.data,r=0;r<a.length;r++)a[r].duration=new Date(a[r].year,a[r].month-1,1);t.data=a;var n=t.xAxes.push(new am4charts.DateAxis);n.renderer.minGridDistance=10,n.renderer.grid.template.disabled=!0,n.renderer.baseGrid.disabled=!1,n.renderer.labels.template.fill="#000",n.title.text="Time",n.renderer.labels.template.fontSize=12,n.title.fontSize=12;var o=t.yAxes.push(new am4charts.ValueAxis);o.min=0,o.renderer.minGridDistance=50,o.renderer.grid.template.strokeDasharray="3,3",o.renderer.labels.template.fill="#000",o.title.text="Number of hours",o.renderer.labels.template.fontSize=12,o.title.fontSize=12,t.numberFormatter.numberFormat="#a";var s=t.series.push(new am4charts.LineSeries);s.dataFields.dateX="duration",s.dataFields.valueY="cumulative_contributions",s.strokeWidth=3,s.tensionX=.8,s.tooltipText="Contributions: {cumulative_contributions} Validations: {cumulative_validations}",s.sequencedInterpolation=!0,s.stroke=am4core.color("#FCC232"),s.name="Recorded";var l=t.series.push(new am4charts.LineSeries);l.dataFields.dateX="duration",l.dataFields.valueY="cumulative_validations",l.sequencedInterpolation=!0,l.tensionX=.8,l.strokeWidth=3,l.stroke=am4core.color("#83E661"),l.name="Validated",t.legend=new am4charts.Legend,t.legend.labels.template.fontSize=12,t.cursor=new am4charts.XYCursor,t.cursor.xAxis=n})};t.exports={Table:m,updateGraph:function(e,t){am4core.disposeAllCharts(),i.show().addClass("d-flex"),c.addClass("d-none"),g(e,t)},buildGraphs:g,getOrderedGenderData:function(e){var t=[];return["Female","Male","Others","Anonymous"].forEach(function(a){e.forEach(function(e){if(a.toLowerCase()===e.gender.toLowerCase()){var r=t.findIndex(function(e){return a.toLowerCase()===e.gender.toLowerCase()});-1===r?t.push(e):t[r].count+=e.count}})}),t},getGenderData:u,getAgeGroupData:d}},{}],2:[function(e,t,a){"use strict";var r=e("./draw-chart").buildGraphs,n=e("./utils").toggleFooterPosition,o=e("./speakerDetails"),s=o.validateUserName,l=o.testUserName,i=o.setSpeakerDetails,c=o.resetSpeakerDetails,d=o.setUserNameTooltip,u=o.setStartRecordBtnToolTipContent;function g(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Math.floor(e/3600),r=e%3600,n=Math.floor(r/60),o=Math.round(r%60);return t?{hours:a,minutes:n,seconds:o}:{hours:a,minutes:n}}var m=function(e){return fetch(e).then(function(e){if(e.ok)return Promise.resolve(e.json());throw Error(e.statusText||"HTTP error")})};function p(e){var t=$("#say-loader"),a=$("#listen-loader");t.removeClass("d-none"),a.removeClass("d-none");var r=localStorage.getItem("aggregateDataCountByLanguage"),n=JSON.parse(r).find(function(t){return t.language===e}),o=$("#say-p-3"),s=$("#listen-p-3");if(n){var l=n.total_contributions,i=n.total_validations;l&&o.text("".concat(l," hrs are recorded in ").concat(e)),i&&s.text("".concat(i," hrs are validated in ").concat(e))}else o.text("0 hr is recorded in ".concat(e)),s.text("0 hr is validated in ".concat(e));t.addClass("d-none"),a.addClass("d-none")}function h(){var e=$("#speaker-data").find("#loader1, #loader2, #loader3"),t=$("#speakers-wrapper"),a=$("#speaker-value"),r=$("#hours-wrapper"),n=$("#hour-value"),o=$("#languages-wrapper"),s=$("#languages-value");e.removeClass("d-none"),r.addClass("d-none"),t.addClass("d-none"),o.addClass("d-none"),m("/aggregate-data-count").then(function(l){try{var i=g(60*Number(l.data[0].total_contributions)*60),c=i.hours,d=i.minutes,u=i.seconds;n.text("".concat(c,"h ").concat(d,"m ").concat(u,"s")),a.text(l.data[0].total_speakers),s.text(l.data[0].total_languages),e.addClass("d-none"),r.removeClass("d-none"),t.removeClass("d-none"),o.removeClass("d-none")}catch(e){console.log(e)}}).catch(function(e){console.log(e)})}function f(e,t,a){var r=am4core.create("speakers_hours_chart",am4charts.XYChart);r.data=e;var n=r.yAxes.push(new am4charts.CategoryAxis);n.dataFields.category=a,n.renderer.grid.template.location=0,n.renderer.cellStartLocation=.2,n.renderer.cellEndLocation=.8,n.renderer.grid.template.strokeWidth=0,n.renderer.labels.template.truncate=!1;var o=r.xAxes.push(new am4charts.ValueAxis);o.renderer.grid.template.strokeWidth=0,o.labelsEnabled=!1,o.renderer.labels.template.truncate=!1,n.renderer.minGridDistance=25;var s=r.series.push(new am4charts.ColumnSeries);s.dataFields.valueX=t,s.dataFields.categoryY=a;var l=s.bullets.push(new am4charts.LabelBullet);l.label.text="total_speakers"===t?"{total_speakers}":"{total_contributions}",l.label.fontSize=20,l.label.horizontalCenter="right",l.label.dx=0;r.events.on("datavalidated",function(e){var t=e.target,a=t.yAxes.getIndex(0),r=35*t.data.length-a.pixelHeight,n=t.pixelHeight+r;t.svgContainer.htmlElement.style.height=n+"px"})}function v(){$("#topLanguageSpinner");m("/top-languages-by-hours").then(function(e){f(e.data,"total_contributions","language")})}var b=function(e,t,a){var r=0,n=a.children();return n.each(function(a,n){n.getAttribute(e)===t&&(r=a)}),n[r]},C=function(e,t,a){var r=a.children(),n=-1;r.each(function(e,a){a.getAttribute("value")===t&&(n=e)}),a.find(".active").removeClass("active");var o=document.getElementById("6th_option");n<0?(o.innerText=t,o.classList.remove("d-none"),o.classList.add("active"),o.setAttribute("value",t)):(r[n].classList.add("active"),o.classList.remove("active"),o.classList.add("d-none"))},y=function(){var e=localStorage.getItem("contributionLanguage"),t=$("#say-listen-language"),a=$("#language-nav-bar");if(!e){var r=document.getElementById("home-page").getAttribute("default-lang"),n=b("id",r,t),o=n.getAttribute("value");return localStorage.setItem("contributionLanguage",o),p(o),void C(0,o,a)}b("value",e,t);p(e),C(0,e,a)};$(document).ready(function(){var e=$("#proceed-box"),t=e.parent(),a=document.querySelectorAll('input[name = "gender"]'),o=document.getElementById("age"),b=document.getElementById("mother-tongue"),x=$("#username"),k=x.next(),w=$("#tnc"),S="Odia";w.prop("checked",!1),n(),t.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto"}),function(){var e=$("#language-nav-bar"),t=e.children(),a=$("#nav-bar-loader");m("/top-languages-by-hours").then(function(r){r.data.forEach(function(e,a){t[a].setAttribute("value",e.language),t[a].innerText=e.language}),a.addClass("d-none"),e.removeClass("d-none")}).then(function(){y()}).catch(function(e){console.log(e)})}();var L=localStorage.getItem("contributionLanguage"),A=$("#language-nav-bar");$("#say-listen-language").on("click",function(e){var t=e.target,a=t.getAttribute("value");L=a,localStorage.setItem("contributionLanguage",a),C(0,a,A),p(a)}),A.on("click",function(e){var t=e.target,a=t.getAttribute("value");L=a,localStorage.setItem("contributionLanguage",a);var r=$("#6th_option");(A.find(".active")||r).removeClass("active"),r.addClass("d-none"),t.classList.add("active"),p(a)}),m("/aggregate-data-count?byLanguage=true").then(function(e){localStorage.setItem("aggregateDataCountByLanguage",JSON.stringify(e.data))}).catch(function(e){console.log(e)}),$("#start_recording").on("click",function(){S="Hindi"===L||"Odia"===L?L:"Odia"}),$('[name="topLanguageChart"]').on("change",function(e){"hours"===e.target.value?v():($("#topLanguageSpinner"),$("#speakers_hours_chart_container"),m("/top-languages-by-speakers").then(function(e){f(e.data,"total_speakers","language")}))}),i("speakerDetails",o,b,x),a.forEach(function(e){e.addEventListener("click",function(e){e.target.previous&&(e.target.checked=!1),e.target.previous=e.target.checked})}),u(x.val().trim(),t),w.change(function(){var a=x.val().trim();this.checked&&!l(a)?(e.removeAttr("disabled").removeClass("point-none"),t.tooltip("disable")):(u(a,t),e.prop("disabled","true").addClass("point-none"),t.tooltip("enable"))}),x.on("input focus",function(){s(x,k,w),d(x)}),e.on("click",function(){if(w.prop("checked")){var e=Array.from(a).filter(function(e){return e.checked}),t=e.length?e[0].value:"",r=x.val().trim().substring(0,12);if(l(r))return;var n={gender:t,age:o.value,motherTongue:b.value,userName:r,language:S};localStorage.setItem("speakerDetails",JSON.stringify(n)),location.href="/record"}}),$("#userModal").on("shown.bs.modal",function(){$("#resetBtn").on("click",c),x.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto",trigger:"focus"}),d(x)});var _=$("#say"),D=$("#listen"),I=$("#listen-p-2"),O=$("#say-p-2");_.hover(function(){_.removeClass("col-lg-5"),D.removeClass("col-lg-5"),_.addClass("col-lg-6"),D.addClass("col-lg-4"),O.removeClass("d-none")},function(){_.removeClass("col-lg-6"),D.removeClass("col-lg-4"),_.addClass("col-lg-5"),D.addClass("col-lg-5"),O.addClass("d-none")}),D.hover(function(){_.removeClass("col-lg-5"),D.removeClass("col-lg-5"),D.addClass("col-lg-6"),_.addClass("col-lg-4"),I.removeClass("d-none")},function(){_.removeClass("col-lg-4"),D.removeClass("col-lg-6"),_.addClass("col-lg-5"),D.addClass("col-lg-5"),I.addClass("d-none")}),h(),r("Odia"),m("/aggregate-data-count?byState=true").then(function(e){var t=e.data.reduce(function(e,t){return e+Number(t.total_contributions)+Number(t.total_validations)},0);e.data.forEach(function(e){var a=g(60*Number(e.total_contributions)*60,!0),r=a.hours,n=a.minutes,o=a.seconds,s=g(60*Number(e.total_validations)*60,!0),l=s.hours,i=s.minutes,c=s.seconds;e.contributed_time="".concat(r,"hrs ").concat(n,"mins ").concat(o,"sec"),e.validated_time="".concat(l,"hrs ").concat(i,"mins ").concat(c,"sec");var d=Number(e.total_contributions)+Number(e.total_validations);e.value=d/t*100,"ANONYMOUS"===e.state?(e.id="Andhra Pradesh",e.state="Andhra Pradesh"):e.id=e.state});var a=am4core.create("indiaMapChart",am4maps.MapChart);a.geodataSource.url="./js/states_india_geo.json",a.projection=new am4maps.projections.Miller;var r=new am4maps.MapPolygonSeries;a.seriesContainer.draggable=!1,a.seriesContainer.resizable=!1,a.maxZoomLevel=1,r.useGeodata=!0,r.data=e.data;var n=r.mapPolygons.template;n.tooltipHTML='<div><h6>{state}</h6> <div>{total_speakers} Speakers  <label style="margin-left: 32px">{contributed_time}</label></div> <div>Validated:  <label style="margin-left: 16px">{validated_time}</label></div></div>',n.nonScalingStroke=!0,n.strokeWidth=.5,n.fill=am4core.color("#fff"),n.states.create("hover").properties.fill=a.colors.getIndex(1).brighten(-.5),r.mapPolygons.template.adapter.add("fill",function(e,t){return t.dataItem?t.dataItem.value>=75?am4core.color("#86D126"):t.dataItem.value>=50?am4core.color("#EA923F"):t.dataItem.value>=25?am4core.color("#FBEA5A"):am4core.color("#C6C6C6"):e}),a.series.push(r),$("#legendDiv").removeClass("d-none")}).catch(function(e){console.log(e)}),v()}),t.exports={calculateTime:g,getStatistics:h,performAPIRequest:m}},{"./draw-chart":1,"./speakerDetails":3,"./utils":4}],3:[function(e,t,a){"use strict";function r(e,t,a){var r=e.val().trim();n(r)?(e.addClass("is-invalid"),t.removeClass("d-none")):(e.removeClass("is-invalid"),t.addClass("d-none")),a.trigger("change")}var n=function(e){return/^[6-9]\d{9}$/.test(e)||/^\S+@\S+[\.][0-9a-z]+$/.test(e)};t.exports={testUserName:n,validateUserName:r,setSpeakerDetails:function(e,t,a,n){var o=localStorage.getItem(e);if(o){var s=JSON.parse(o),l=document.querySelector('input[name = "gender"][value="'+s.gender+'"]');l&&(l.checked=!0,l.previous=!0),t.value=s.age,a.value=s.motherTongue,n.val(s.userName?s.userName.trim().substring(0,12):""),r(n,n.next(),$("#tnc"))}},resetSpeakerDetails:function(){var e=document.getElementById("age"),t=document.getElementById("mother-tongue"),a=document.getElementById("username"),r=document.querySelector('input[name = "gender"]:checked');r&&(r.checked=!1),e.selectedIndex=0,t.selectedIndex=0,a.value=""},setUserNameTooltip:function(e){e.val().length>11?(e.tooltip("enable"),e.tooltip("show")):(e.tooltip("disable"),e.tooltip("hide"))},setStartRecordBtnToolTipContent:function(e,t){n(e)?t.attr("data-original-title","Please validate any error message before proceeding"):t.attr("data-original-title","Please agree to the Terms and Conditions before proceeding")}}},{}],4:[function(e,t,a){"use strict";t.exports={setPageContentHeight:function(){var e=$("footer"),t=$(".navbar"),a=100-(e.outerHeight()+t.outerHeight())*(100/document.documentElement.clientHeight);$("#content-wrapper").css("min-height",a+"vh")},toggleFooterPosition:function(){var e=$("footer");e.toggleClass("fixed-bottom"),e.toggleClass("bottom")},fetchLocationInfo:function(){return fetch("http://ip-api.com/json/?fields=country,regionName")}}},{}]},{},[2]);