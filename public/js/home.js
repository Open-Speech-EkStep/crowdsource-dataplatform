function updateLanguageInButton(e){document.getElementById("start-record").innerText=`START RECORDING IN ${e.toUpperCase()}`}function updateLanguage(e){const t=$("#speaker-data"),n=t.find("#loader1,#loader2"),a=t.find("#speakers-wrapper"),o=t.find("#speaker-value"),r=t.find("#hours-wrapper"),d=t.find("#hour-value");fetch(`/getDetails/${e}`).then(e=>{if(e.ok)return e.json();throw Error(e.statusText||"HTTP error")}).then(t=>{try{n.addClass("d-none");const l=6*t.find(e=>1===e.index).count,s=Math.floor(l/3600),c=l%3600,i=Math.floor(c/60),u=c%60;document.getElementById("language_button").innerText=e,updateLanguageInButton(e),d.text(`${s}h ${i}m ${u}s`),o.text(t.find(e=>0===e.index).count),r.removeClass("d-none"),a.removeClass("d-none"),localStorage.setItem("speakersData",JSON.stringify(t))}catch(t){console.log(t)}}).catch(e=>{console.log(e)})}function resetDetails(){document.querySelector('input[name = "gender"]:checked').checked=!1,document.getElementById("age").selectedIndex=0,document.getElementById("mother-tongue").selectedIndex=0,document.getElementById("username").value=""}$(document).ready(function(){const e=$("#proceed-box"),t=e.parent(),n=document.querySelectorAll('input[name = "gender"]'),a=document.getElementById("age"),o=($("language"),document.getElementById("mother-tongue")),r=$("#username"),d=r.next(),l=$("#tnc"),s=/^[6-9]\d{9}$/,c=/^\S+@\S+[\.][0-9a-z]+$/,i=$("#speaker-data"),u=i.find("#loader1,#loader2"),g=i.find("#speakers-wrapper"),m=i.find("#speaker-value"),p=i.find("#hours-wrapper"),h=i.find("#hour-value");let v="Odia";const f=e=>s.test(e)||c.test(e),y=()=>{r.val().length>11?(r.tooltip("enable"),r.tooltip("show")):(r.tooltip("disable"),r.tooltip("hide"))},I=()=>{const e=r.val().trim();f(e)?(r.addClass("is-invalid"),d.removeClass("d-none")):(r.removeClass("is-invalid"),d.addClass("d-none")),l.trigger("change"),y()};r.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto",trigger:"focus"}),y(),l.prop("checked",!1),t.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto"});const k=localStorage.getItem("speakerDetails");if(k){const e=JSON.parse(k),t=document.querySelector('input[name = "gender"][value="'+e.gender+'"]');t&&(t.checked=!0,t.previous=!0),a.value=e.age,o.value=e.motherTongue,r.val(e.userName?e.userName.trim().substring(0,12):""),I()}n.forEach(e=>{e.addEventListener("click",e=>{e.target.previous&&(e.target.checked=!1),e.target.previous=e.target.checked})});const E=e=>{f(e)?t.attr("data-original-title","Please validate any error message before proceeding"):t.attr("data-original-title","Please agree to the Terms and Conditions before proceeding")};let x;document.getElementById("languageTop").addEventListener("change",e=>{x=e.target.value,$("#start_recording").removeAttr("disabled")}),document.getElementById("start_recording").addEventListener("click",()=>{v=x});let B="Odia";document.getElementById("language").addEventListener("change",e=>{updateLanguage(B=e.target.value),updateGraph(B)}),document.getElementById("start-record").addEventListener("click",()=>{v=B}),E(r.val().trim()),l.change(function(){const n=r.val().trim();this.checked&&!f(n)?(e.removeAttr("disabled").removeClass("point-none"),t.tooltip("disable")):(E(n),e.prop("disabled","true").addClass("point-none"),t.tooltip("enable"))}),r.on("input focus",I),e.on("click",e=>{if(l.prop("checked")){const e=Array.from(n).filter(e=>e.checked),t=e.length?e[0].value:"",d=r.val().trim().substring(0,12);if(f(d))return;const l={gender:t,age:a.value,motherTongue:o.value,userName:d,language:v};localStorage.setItem("speakerDetails",JSON.stringify(l)),location.href="/record"}}),updateLanguageInButton("Odia"),fetch("/getDetails/Odia").then(e=>{if(e.ok)return e.json();throw Error(e.statusText||"HTTP error")}).then(e=>{try{u.addClass("d-none");const t=6*e.find(e=>1===e.index).count,n=Math.floor(t/3600),a=t%3600,o=Math.floor(a/60),r=a%60;h.text(`${n}h ${o}m ${r}s`),m.text(e.find(e=>0===e.index).count),p.removeClass("d-none"),g.removeClass("d-none"),localStorage.setItem("speakersData",JSON.stringify(e))}catch(e){console.log(e)}}).catch(e=>{console.log(e)})}),$("#userModal").on("shown.bs.modal",function(){const e=document.querySelector('input[name = "gender"]:checked').value,t=document.getElementById("age").selectedIndex,n=document.getElementById("username").value,a=document.getElementById("mother-tongue").selectedIndex;(e||t||n||a)&&$("#resetBtn").removeClass("d-none")});