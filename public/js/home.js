!function e(t,a,o){function n(s,l){if(!a[s]){if(!t[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return n(a||e)},c,c.exports,e,t,a,o)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,a){"use strict";var o=e("./home-page-charts"),n=o.generateIndiaMap,r=o.getStatistics,s=o.showByHoursChart,l=o.showBySpeakersChart,i=e("./utils").toggleFooterPosition,c=e("./speakerDetails"),d=c.validateUserName,u=c.testUserName,g=c.setSpeakerDetails,m=c.resetSpeakerDetails,v=c.setUserNameTooltip,h=c.setStartRecordBtnToolTipContent,p="aggregateDataCountByLanguage",f=[{value:"Assamese",id:"as",text:"অসমীয়া"},{value:"Bengali",id:"bn",text:"বাংলা"},{value:"English",id:"en",text:"English"},{value:"Gujrati",id:"gu",text:"ગુજરાતી"},{value:"Hindi",id:"hi",text:"हिन्दी"},{value:"Kannada",id:"kn",text:"ಕನ್ನಡ"},{value:"Malayalam",id:"ml",text:"മലയാളം"},{value:"Marathi",id:"mr",text:"मराठी"},{value:"Odia",id:"or",text:"ଘୃଣା"},{value:"Punjabi",id:"pa",text:"ਪੰਜਾਬੀ"},{value:"Tamil",id:"ta",text:"தமிழ்"},{value:"Telugu",id:"te",text:"తెలుగు"}],C=function(e){return fetch(e).then(function(e){if(e.ok)return Promise.resolve(e.json());throw Error(e.statusText||"HTTP error")})};function b(e){var t=$("#say-loader"),a=$("#listen-loader");t.removeClass("d-none"),a.removeClass("d-none");var o=$("#say-p-3"),n=$("#listen-p-3"),r=localStorage.getItem(p),s=JSON.parse(r),l=s&&s.find(function(t){return t.language===e});if(l){var i=l.total_contributions,c=l.total_validations;i&&o.text("".concat(i," hrs recorded in ").concat(e)),c&&n.text("".concat(c," hrs validated in ").concat(e))}else o.text("0 hr recorded in ".concat(e)),n.text("0 hr validated in ".concat(e));t.addClass("d-none"),a.addClass("d-none")}var x=function(e,t,a){var o=0,n=a.children();return n.each(function(a,n){n.getAttribute(e)===t&&(o=a)}),n[o]},y=function(e,t,a){var o=a.children(),n=-1;o.each(function(e,a){a.getAttribute("value")===t&&(n=e)}),a.find(".active").removeClass("active");var r=document.getElementById("6th_option"),s=f.find(function(e){return e.value===t});r.innerText=s.text,n<0?(r.classList.remove("d-none"),r.classList.add("active"),r.setAttribute("value",t)):(o[n].classList.add("active"),r.classList.remove("active"),r.classList.add("d-none"))},S=function(e){var t=$("#language-nav-bar"),a=$("#nav-bar-loader");e.data.forEach(function(e,a){var o=f.find(function(t){return t.value===e.language});t.append('<li class="nav-item mx-2 mx-lg-4 options" value='.concat(e.language,">").concat(o.text,"</li>"))}),a.addClass("d-none"),t.removeClass("d-none"),k()},k=function(){var e=localStorage.getItem("contributionLanguage"),t=$("#say-listen-language"),a=$("#language-nav-bar");if(!e){var o=document.getElementById("home-page").getAttribute("default-lang"),n=x("id",o,t),r=n.getAttribute("value");return localStorage.setItem("contributionLanguage",r),b(r),void y(0,r,a)}x("value",e,t);b(e),y(0,e,a)};$(document).ready(function(){localStorage.removeItem("topLanguagesByHours"),localStorage.removeItem("topLanguagesBySpeakers"),localStorage.removeItem("aggregatedDataByState"),localStorage.removeItem(p);var e,t=$("#proceed-box"),a=t.parent(),o=document.querySelectorAll('input[name = "gender"]'),c=document.getElementById("age"),f=document.getElementById("mother-tongue"),x=$("#username"),k=x.next(),I=$("#tnc"),_="Odia";I.prop("checked",!1),i(),a.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto"}),(e=localStorage.getItem("topLanguagesByHours"))?S(JSON.parse(e)):C("/top-languages-by-hours").then(function(e){localStorage.setItem("topLanguagesByHours",JSON.stringify(e)),S(e)});var L=localStorage.getItem("contributionLanguage"),B=$("#language-nav-bar");$("#say-listen-language").on("click",function(e){var t=e.target,a=t.getAttribute("value");L=a,localStorage.setItem("contributionLanguage",a),y(0,a,B),b(a)}),B.on("click",function(e){var t=e.target,a=t.getAttribute("value");L=a,localStorage.setItem("contributionLanguage",a);var o=$("#6th_option");(B.find(".active")||o).removeClass("active"),o.addClass("d-none"),t.classList.add("active"),b(a)}),C("/aggregate-data-count?byLanguage=true").then(function(e){localStorage.setItem(p,JSON.stringify(e.data))}).catch(function(e){console.log(e)}),$("#start_recording").on("click",function(){_="Hindi"===L||"Odia"===L?L:"Odia"}),$('[name="topLanguageChart"]').on("change",function(e){"hours"===e.target.value?s():l()}),g("speakerDetails",c,f,x),o.forEach(function(e){e.addEventListener("click",function(e){e.target.previous&&(e.target.checked=!1),e.target.previous=e.target.checked})}),h(x.val().trim(),a),I.change(function(){var e=x.val().trim();this.checked&&!u(e)?(t.removeAttr("disabled").removeClass("point-none"),a.tooltip("disable")):(h(e,a),t.prop("disabled","true").addClass("point-none"),a.tooltip("enable"))}),x.on("input focus",function(){d(x,k,I),v(x)}),t.on("click",function(){if(I.prop("checked")){var e=Array.from(o).filter(function(e){return e.checked}),t=e.length?e[0].value:"",a=x.val().trim().substring(0,12);if(u(a))return;var n={gender:t,age:c.value,motherTongue:f.value,userName:a,language:_};localStorage.setItem("speakerDetails",JSON.stringify(n)),location.href="/record"}}),$("#userModal").on("shown.bs.modal",function(){$("#resetBtn").on("click",m),x.tooltip({container:"body",placement:screen.availWidth>500?"right":"auto",trigger:"focus"}),v(x)});var E=$("#say"),N=$("#listen"),T=$("#listen-p-2"),w=$("#say-p-2"),A=$("#say_container"),H=$("#listen_container");E.hover(function(){E.removeClass("col-lg-5"),N.removeClass("col-lg-5"),E.addClass("col-lg-6"),N.addClass("col-lg-4"),E.removeClass("col-md-5"),N.removeClass("col-md-5"),E.addClass("col-md-6"),N.addClass("col-md-4"),w.removeClass("d-none"),A.addClass("say-active")},function(){E.removeClass("col-lg-6"),N.removeClass("col-lg-4"),E.addClass("col-lg-5"),N.addClass("col-lg-5"),E.removeClass("col-md-6"),N.removeClass("col-md-4"),E.addClass("col-md-5"),N.addClass("col-md-5"),w.addClass("d-none"),A.removeClass("say-active")}),N.hover(function(){E.removeClass("col-lg-5"),N.removeClass("col-lg-5"),N.addClass("col-lg-6"),E.addClass("col-lg-4"),T.removeClass("d-none"),H.addClass("listen-active")},function(){E.removeClass("col-lg-4"),N.removeClass("col-lg-6"),E.addClass("col-lg-5"),N.addClass("col-lg-5"),T.addClass("d-none"),H.removeClass("listen-active")}),r(),n(),s()}),t.exports={performAPIRequest:C,updateHrsForSayAndListen:b,getDefaultTargettedDiv:x}},{"./home-page-charts":2,"./speakerDetails":3,"./utils":4}],2:[function(e,t,a){"use strict";var o="topLanguagesByHours",n="topLanguagesBySpeakers",r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o="";return e>0&&(o+="".concat(e," hrs ")),t>0&&(o+="".concat(t," min ")),a>0&&(o+="".concat(a," sec ")),o.substr(0,o.length-1)},s=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Math.floor(e/3600),o=e%3600,n=Math.floor(o/60),r=Math.round(o%60);return t?{hours:a,minutes:n,seconds:r}:{hours:a,minutes:n}},l=function(e){return fetch(e).then(function(e){if(e.ok)return Promise.resolve(e.json());throw Error(e.statusText||"HTTP error")})};function i(e,t,a){var o=am4core.create("speakers_hours_chart",am4charts.XYChart);c.chart=o,"total_speakers"!==t&&e.forEach(function(e){var t=s(60*Number(e.total_contributions)*60,!0),a=t.hours,o=t.minutes,n=t.seconds;e.total_contributions_text=r(a,o,n)}),o.data=e;var n=o.yAxes.push(new am4charts.CategoryAxis);n.dataFields.category=a,n.renderer.grid.template.location=0,n.renderer.cellStartLocation=.2,n.renderer.cellEndLocation=.8,n.renderer.grid.template.strokeWidth=0,n.renderer.labels.template.truncate=!1;var l=o.xAxes.push(new am4charts.ValueAxis);l.renderer.grid.template.strokeWidth=0,l.labelsEnabled=!1,l.renderer.labels.template.truncate=!1,n.renderer.minGridDistance=25;var i=o.series.push(new am4charts.ColumnSeries);i.dataFields.valueX=t,i.dataFields.categoryY=a;var d=i.bullets.push(new am4charts.LabelBullet);d.label.text="total_speakers"===t?"{total_speakers}":"{total_contributions_text}",d.label.fontSize=20,d.label.horizontalCenter="right",d.label.dx=0;o.events.on("datavalidated",function(e){var t=e.target,a=t.yAxes.getIndex(0),o=35*t.data.length-a.pixelHeight,n=t.pixelHeight+o;t.svgContainer.htmlElement.style.height=n+"px"})}var c={};t.exports={generateIndiaMap:function(){l("/aggregate-data-count?byState=true").then(function(e){!function(e){var t,a=$("#legendDiv"),o=Math.max.apply(Math,e.data.map(function(e){return Number(e.total_contributions)}));t=o>1?o/4:.25,e.data.forEach(function(e){var t=s(60*Number(e.total_contributions)*60,!0),a=t.hours,o=t.minutes,n=t.seconds,r=s(60*Number(e.total_validations)*60,!0),l=r.hours,i=r.minutes,c=r.seconds;e.contributed_time="".concat(a,"hrs ").concat(o,"mins ").concat(n,"sec"),e.validated_time="".concat(l,"hrs ").concat(i,"mins ").concat(c,"sec"),e.value=Number(e.total_contributions),e.id=e.state});var n=am4core.create("indiaMapChart",am4maps.MapChart);n.geodataSource.url="./js/states_india_geo.json",n.projection=new am4maps.projections.Miller;var l=new am4maps.MapPolygonSeries;n.seriesContainer.draggable=!1,n.seriesContainer.resizable=!1,n.maxZoomLevel=1,l.useGeodata=!0,l.data=e.data;var i=l.mapPolygons.template;i.tooltipHTML='<div><h6>{state}</h6> <div>{total_speakers} Speakers  <label style="margin-left: 32px">{contributed_time}</label></div> <div>Validated:  <label style="margin-left: 16px">{validated_time}</label></div></div>',i.nonScalingStroke=!0,i.strokeWidth=.5,i.fill=am4core.color("#fff"),i.states.create("hover").properties.fill=n.colors.getIndex(1).brighten(-.5),l.mapPolygons.template.adapter.add("fill",function(e,a){return a.dataItem?a.dataItem.value>=3*t?am4core.color("#4061BF"):a.dataItem.value>=2*t?am4core.color("#6B85CE"):a.dataItem.value>=t?am4core.color("#92A8E8"):a.dataItem.value>=0?am4core.color("#CDD8F6"):am4core.color("#E9E9E9"):e}),n.series.push(l);var c=$("#quarter .legend-val"),d=$("#half .legend-val"),u=$("#threeQuarter .legend-val"),g=$("#full .legend-val"),m=s(60*t*60,!1),v=m.hours,h=m.minutes,p=s(2*t*60*60,!1),f=p.hours,C=p.minutes,b=s(3*t*60*60,!1),x=b.hours,y=b.minutes;c.text("0 - ".concat(r(v,h))),d.text("".concat(r(v,h)," - ").concat(r(f,C))),u.text("".concat(r(f,C)," - ").concat(r(x,y))),g.text("> ".concat(r(x,y))),a.removeClass("d-none").addClass("d-flex")}(e)}).catch(function(e){console.log(e)})},showByHoursChart:function(){c.chart&&c.chart.dispose();var e=localStorage.getItem(o);e?i(JSON.parse(e).data,"total_contributions","language"):l("/top-languages-by-hours").then(function(e){localStorage.setItem(o,JSON.stringify(e)),i(e.data,"total_contributions","language")})},showBySpeakersChart:function(){c.chart&&c.chart.dispose();var e=localStorage.getItem(n);e?i(JSON.parse(e).data,"total_speakers","language"):l("/top-languages-by-speakers").then(function(e){localStorage.setItem(n,JSON.stringify(e)),i(e.data,"total_speakers","language")})},getStatistics:function(){var e=$("#speaker-data").find("#loader1, #loader2, #loader3"),t=$("#speakers-wrapper"),a=$("#speaker-value"),o=$("#hours-wrapper"),n=$("#hour-value"),r=$("#languages-wrapper"),i=$("#languages-value");e.removeClass("d-none"),o.addClass("d-none"),t.addClass("d-none"),r.addClass("d-none"),l("/aggregate-data-count").then(function(l){try{var c=s(60*Number(l.data[0].total_contributions)*60),d=c.hours,u=c.minutes,g=c.seconds;n.text("".concat(d,"h ").concat(u,"m ").concat(g,"s")),a.text(l.data[0].total_speakers),i.text(l.data[0].total_languages),e.addClass("d-none"),o.removeClass("d-none"),t.removeClass("d-none"),r.removeClass("d-none")}catch(e){console.log(e)}}).catch(function(e){console.log(e)})},calculateTime:s,formatTime:r}},{}],3:[function(e,t,a){"use strict";function o(e,t,a){var o=e.val().trim();n(o)?(e.addClass("is-invalid"),t.removeClass("d-none")):(e.removeClass("is-invalid"),t.addClass("d-none")),a.trigger("change")}var n=function(e){return/^[6-9]\d{9}$/.test(e)||/^\S+@\S+[\.][0-9a-z]+$/.test(e)};t.exports={testUserName:n,validateUserName:o,setSpeakerDetails:function(e,t,a,n){var r=localStorage.getItem(e);if(r){var s=JSON.parse(r),l=document.querySelector('input[name = "gender"][value="'+s.gender+'"]');l&&(l.checked=!0,l.previous=!0),t.value=s.age,a.value=s.motherTongue,n.val(s.userName?s.userName.trim().substring(0,12):""),o(n,n.next(),$("#tnc"))}},resetSpeakerDetails:function(){var e=document.getElementById("age"),t=document.getElementById("mother-tongue"),a=document.getElementById("username"),o=document.querySelector('input[name = "gender"]:checked');o&&(o.checked=!1),e.selectedIndex=0,t.selectedIndex=0,a.value=""},setUserNameTooltip:function(e){e.val().length>11?(e.tooltip("enable"),e.tooltip("show")):(e.tooltip("disable"),e.tooltip("hide"))},setStartRecordBtnToolTipContent:function(e,t){n(e)?t.attr("data-original-title","Please validate any error message before proceeding"):t.attr("data-original-title","Please agree to the Terms and Conditions before proceeding")}}},{}],4:[function(e,t,a){"use strict";t.exports={setPageContentHeight:function(){var e=$("footer"),t=$(".navbar"),a=100-(e.outerHeight()+t.outerHeight())*(100/document.documentElement.clientHeight);$("#content-wrapper").css("min-height",a+"vh")},toggleFooterPosition:function(){var e=$("footer");e.toggleClass("fixed-bottom"),e.toggleClass("bottom")},fetchLocationInfo:function(){return fetch("https://api.ipify.org/?format=json").then(function(e){if("ip"in e){var t=e.ip;return fetch("/location-info?ip=".concat(t))}return new Promise(function(e,t){t("Ip Address not available")})})}}},{}]},{},[1]);